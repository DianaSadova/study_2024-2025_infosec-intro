---
## Front matter
lang: ru-RU
title: Лабораторная работа № 5
subtitle: Дискреционное разграничение прав в Linux. Исследование влияния дополнительных атрибутов
author:
  - Cадова Д. А.
institute:
  - Российский университет дружбы народов, Москва, Россия

## i18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
---

# Информация

## Докладчик

:::::::::::::: {.columns align=center}
::: {.column width="70%"}

  * Садова Диана Алексеевна
  * студент бакалавриата
  * Российский университет дружбы народов
  * [113229118@pfur.ru]
  * <https://DianaSadova.github.io/ru/>

:::
::::::::::::::

# Вводная часть

## Актуальность

- Нам важно понимаит как изменяется индификаторы, и SetUID- , Sticky-битов. Так же, нужно отрабатывать навыки работы в консоли с дополнительными атрибутами

## Цели и задачи

- Изучение механизмов изменения идентификаторов, применения SetUID- и Sticky-битов. Получение практических навыков работы в консоли с дополнительными атрибутами. Рассмотрение работы механизма смены идентификатора процессов пользователей, а также влияние бита Sticky на запись и удаление файлов 

## Материалы и методы

- Текст лабороторной работы № 5

## Содержание исследования

### Создание программы

1. Войдите в систему от имени пользователя guest.

![Заходим в систему пользователя guest](image/1.png)

##

2. Создайте программу simpleid.c:

![Создаем файл с именем simpleid](image/2.png)

##

![Код](image/3.png)

##

3. Скомплилируйте программу и убедитесь, что файл программы создан:

![Скомплилируем программу](image/4.png)

##

4. Выполните программу simpleid:

![Выполняем код](image/5.png)

##

5. Выполните системную программу id:

![Выполняем системную программу id](image/6.png)

##

и сравните полученный вами результат с данными предыдущего пункта задания.

Записи идентичны.

##

6. Усложните программу, добавив вывод действительных идентификаторов:

![Код](image/7.png)

##

7. Скомпилируйте и запустите simpleid2.c:

![Скомплилируем программу](image/9.png)

##

8. От имени суперпользователя выполните команды:

![Выполняем команды](image/10.png)

##

9. Используйте sudo или повысьте временно свои права с помощью su.

![Переходим в режим суперпользователя](image/11.png)

##

Поясните, что делают эти команды.

Мы пытаемся запустить код в файле simpleid2.c от имени суперпользователя.

##

10. Выполните проверку правильности установки новых атрибутов и смены владельца файла simpleid2:

![Проверяем правильности новых атрибутов](image/12.png)

##

11. Запустите simpleid2 и id:

![Запускаем simpleid2 и id](image/13.png)

##

Сравните результаты.

simpleid2 - выдает только информацию о id (номер).

id - дает больше информации об пользователе и его группах.

##

12. Проделайте тоже самое относительно SetGID-бита.

13. Создайте программу readfile.c:

![Код](image/14.png)

##

14. Откомпилируйте её.

![Скомплилируем программу](image/15.png)

##

15. Смените владельца у файла readfile.c (или любого другого текстового файла в системе) и измените права так, чтобы только суперпользователь (root) мог прочитать его, a guest не мог.

![Меняем прова доступа](image/16.png)

##

16. Проверьте, что пользователь guest не может прочитать файл readfile.c.

![Проверяем, что  guest не может прочитать файл](image/17.png)

##

17. Смените у программы readfile владельца и установите SetU’D-бит..

![Снимаем у readfile владельца](image/18.png)

##

18. Проверьте, может ли программа readfile прочитать файл readfile.c?

![Проверяем может ли readfile прочитать файл readfile.c](image/23.png)

##

19. Проверьте, может ли программа readfile прочитать файл /etc/shadow?

![Проверяем может ли readfile прочитать файл /etc/shadow](image/24.png)

### Исследование Sticky-бита

1. Выясните, установлен ли атрибут Sticky на директории /tmp, для чего выполните команду

![Определяем установлин ли атрибут Sticky](image/25.png)

##

2. От имени пользователя guest создайте файл file01.txt в директории /tmp со словом test:

![Создаем файл file01.txt](image/26.png)

##

3. Просмотрите атрибуты у только что созданного файла и разрешите чтение и запись для категории пользователей «все остальные»:

![Просматриваем все атрибуты](image/27.png)

##

4. От пользователя guest2 (не являющегося владельцем) попробуйте прочитать файл /tmp/file01.txt:

![Пробуем читать файл от guest2](image/28.png)

##

5. От пользователя guest2 попробуйте дозаписать в файл /tmp/file01.txt слово test2 командой

![Пробуем чтото дописать в файл](image/29.png)

##

Удалось ли вам выполнить операцию?

Нет. Отказано в доступе.

##

6. Проверьте содержимое файла командой

![Проверяем содержимое файла](image/30.png)

##

7. От пользователя guest2 попробуйте записать в файл /tmp/file01.txt слово test3, стерев при этом всю имеющуюся в файле информацию командой

![Пробуем чтото дописать в файл](image/31.png)

##

Удалось ли вам выполнить операцию?

Нет. Отказано в доступе.

##

8. Проверьте содержимое файла командой

![Проверяем содержимое файла](image/32.png)

##

9. От пользователя guest2 попробуйте удалить файл /tmp/file01.txt командой

![Пробуем удалить файл](image/33.png)

##

Удалось ли вам удалить файл?

Нет. Отказано в доступе.

##

10. Повысьте свои права до суперпользователя следующей командой su - и выполните после этого команду, снимающую атрибут t (Sticky-бит) с директории /tmp:

![Переходим в режим суперпользователя и снимаем атрибут](image/34.png)

##

11. Покиньте режим суперпользователя командой

![Выходим из режима суперпользователя](image/35.png)

##

12. От пользователя guest2 проверьте, что атрибута t у директории /tmp нет:

![Проверяем наличие атрибута t](image/36.png)

##

13. Повторите предыдущие шаги. Какие наблюдаются изменения?

![Повторяем предыдущие шаги](image/37.png)

##

14. Удалось ли вам удалить файл от имени пользователя, не являющегося его владельцем? Ваши наблюдения занесите в отчёт.

Да, мы смогли удалить файл

##

15. Повысьте свои права до суперпользователя и верните атрибут t на директорию /tmp:

![Возращаем предыдущие шаги](image/38.png)

## Результаты

- Изучили механиз изменения идентификаторов, применения SetUID- и Sticky-битов. 

- Получили практические навыки работы в консоли с дополнительными атрибутами. 

- Рассмотрели работы механизма смены идентификатора процессов пользователей, а также влияние бита Sticky на запись и удаление файлов

